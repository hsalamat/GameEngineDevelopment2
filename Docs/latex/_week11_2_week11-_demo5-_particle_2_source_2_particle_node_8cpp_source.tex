\hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source}{}\doxysection{Particle\+Node.\+cpp}
\label{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source}\index{Week11/Week11-\/Demo5-\/Particle/Source/ParticleNode.cpp@{Week11/Week11-\/Demo5-\/Particle/Source/ParticleNode.cpp}}
\mbox{\hyperlink{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#pragma region step 7}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00002}00002 \textcolor{preprocessor}{\#include <ParticleNode.hpp>}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00003}00003 \textcolor{preprocessor}{\#include <DataTables.hpp>}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00004}00004 \textcolor{preprocessor}{\#include <ResourceHolder.hpp>}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00005}00005 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00006}00006 \textcolor{preprocessor}{\#include <SFML/Graphics/RenderTarget.hpp>}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00007}00007 \textcolor{preprocessor}{\#include <SFML/Graphics/Texture.hpp>}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00008}00008 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00009}00009 \textcolor{preprocessor}{\#include <algorithm>}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00010}00010 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00011}00011 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00012}00012 \textcolor{keyword}{namespace}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00013}00013 \{}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00014}00014     \textcolor{keyword}{const} std::vector<ParticleData> Table = \mbox{\hyperlink{_week11_2_week11-_demo5-_particle_2_include_2_data_tables_8hpp_a45647c7be67681e275a5e42531d49526}{initializeParticleData}}();}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00015}00015 \}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00016}00016 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00017}\mbox{\hyperlink{class_particle_node_a97ec6b5e658179a7a78a909ee8661a1a}{00017}} \mbox{\hyperlink{class_particle_node_a97ec6b5e658179a7a78a909ee8661a1a}{ParticleNode::ParticleNode}}(\mbox{\hyperlink{struct_particle_aa27c7e68459c587570d108f511ea353e}{Particle::Type}} type, \textcolor{keyword}{const} \mbox{\hyperlink{class_texture_holder}{TextureHolder}}\& textures)}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00018}00018     : \mbox{\hyperlink{class_scene_node}{SceneNode}}()}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00019}00019     , mParticles()}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00020}00020     , mTexture(textures.get(\mbox{\hyperlink{namespace_textures}{Textures}}::\mbox{\hyperlink{struct_particle}{Particle}}))}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00021}00021     , mType(type)}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00022}00022     , mVertexArray(\mbox{\hyperlink{namespacesf}{sf}}::\mbox{\hyperlink{group__graphics_gga5ee56ac1339984909610713096283b1bac968add05250b2cf59350dc68043a3c0}{Quads}})}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00023}00023     , mNeedsVertexUpdate(true)}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00024}00024 \{}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00025}00025 \}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00026}00026 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00027}00027 \textcolor{comment}{//Look up the data table and insert a particle into the system}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00028}\mbox{\hyperlink{class_particle_node_aba35c74ce9a85194489726b82ab53f80}{00028}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_particle_node_aba35c74ce9a85194489726b82ab53f80}{ParticleNode::addParticle}}(\mbox{\hyperlink{classsf_1_1_vector2}{sf::Vector2f}} position)}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00029}00029 \{}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00030}00030     \mbox{\hyperlink{struct_particle}{Particle}} particle;}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00031}00031     particle.\mbox{\hyperlink{struct_particle_ae3a38445c8cda2ae6e8b95b7d4d800c5}{position}} = position;}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00032}00032     particle.\mbox{\hyperlink{struct_particle_ac4b0b63df626ccb45334c7df7a6ca446}{color}} = Table[\mbox{\hyperlink{class_particle_node_a4485ad546e45a412ac3961067248d23f}{mType}}].color;}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00033}00033     particle.\mbox{\hyperlink{struct_particle_a160dfae711f857869ddf279cc745a350}{lifetime}} = Table[\mbox{\hyperlink{class_particle_node_a4485ad546e45a412ac3961067248d23f}{mType}}].lifetime;}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00035}00035     \textcolor{comment}{//since all particles have the same lifetime, older partciles are stored at the beginning of the container}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00036}00036     \mbox{\hyperlink{class_particle_node_ae8df6ca95db688034122d24d4cc50197}{mParticles}}.push\_back(particle);}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00037}00037 \}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00038}00038 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00039}\mbox{\hyperlink{class_particle_node_aa0e084971d3c1649077cfeacc75faabd}{00039}} \mbox{\hyperlink{struct_particle_aa27c7e68459c587570d108f511ea353e}{Particle::Type}} \mbox{\hyperlink{class_particle_node_aa0e084971d3c1649077cfeacc75faabd}{ParticleNode::getParticleType}}()\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00040}00040 \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00041}00041     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_particle_node_a4485ad546e45a412ac3961067248d23f}{mType}};}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00042}00042 \}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00043}00043 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00044}\mbox{\hyperlink{class_particle_node_aa74bf56dc711a32a4722fad6002c4f98}{00044}} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_particle_node_aa74bf56dc711a32a4722fad6002c4f98}{ParticleNode::getCategory}}()\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00045}00045 \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00046}00046     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespace_category_a2ff936dbd42aeae91fdfb6f8456a8ab0af24660c722f331a3532c04477295998c}{Category::ParticleSystem}};}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00047}00047 \}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00048}00048 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00049}\mbox{\hyperlink{class_particle_node_a6c72830797ef877f9b6adcdc49a2c43b}{00049}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_particle_node_a6c72830797ef877f9b6adcdc49a2c43b}{ParticleNode::updateCurrent}}(\mbox{\hyperlink{classsf_1_1_time}{sf::Time}} dt, \mbox{\hyperlink{class_command_queue}{CommandQueue}}\&)}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00050}00050 \{}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00051}00051     \textcolor{comment}{// Remove expired particles at beginning}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00052}00052     \textcolor{keywordflow}{while} (!\mbox{\hyperlink{class_particle_node_ae8df6ca95db688034122d24d4cc50197}{mParticles}}.empty() \&\& \mbox{\hyperlink{class_particle_node_ae8df6ca95db688034122d24d4cc50197}{mParticles}}.front().lifetime <= \mbox{\hyperlink{classsf_1_1_time_aa343e67f43a940e7b3b51aa10a495f2f}{sf::Time::Zero}})}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00053}00053         \mbox{\hyperlink{class_particle_node_ae8df6ca95db688034122d24d4cc50197}{mParticles}}.pop\_front();  \textcolor{comment}{//older particles are in the front of queue and expire first}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00054}00054 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00055}00055     \textcolor{comment}{// Decrease lifetime of existing particles}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00056}00056     \textcolor{keywordflow}{for} (\mbox{\hyperlink{struct_particle}{Particle}}\& particle : \mbox{\hyperlink{class_particle_node_ae8df6ca95db688034122d24d4cc50197}{mParticles}})}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00057}00057         particle.lifetime -\/= dt;}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00058}00058 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00059}00059     \mbox{\hyperlink{class_particle_node_a4cd30b26b7e86cd4420d5313f51cc518}{mNeedsVertexUpdate}} = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00060}00060 \}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00061}00061 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00062}\mbox{\hyperlink{class_particle_node_afd4b177d6da7f4077d126510022ae2f9}{00062}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_particle_node_afd4b177d6da7f4077d126510022ae2f9}{ParticleNode::drawCurrent}}(\mbox{\hyperlink{classsf_1_1_render_target}{sf::RenderTarget}}\& target, \mbox{\hyperlink{classsf_1_1_render_states}{sf::RenderStates}} states)\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00063}00063 \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00064}00064     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_particle_node_a4cd30b26b7e86cd4420d5313f51cc518}{mNeedsVertexUpdate}})}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00065}00065     \{}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00066}00066         \mbox{\hyperlink{class_particle_node_a75a9822330bc236bce9957da1f196922}{computeVertices}}();}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00067}00067         \mbox{\hyperlink{class_particle_node_a4cd30b26b7e86cd4420d5313f51cc518}{mNeedsVertexUpdate}} = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00068}00068     \}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00069}00069 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00070}00070     \textcolor{comment}{// Apply particle texture}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00071}00071     states.\mbox{\hyperlink{classsf_1_1_render_states_ad7eb50453917561fa7a9df7f4c53f1fd}{texture}} = \&\mbox{\hyperlink{class_particle_node_ac53a11666cf195dc17af575ec74a990c}{mTexture}};}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00072}00072 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00073}00073     \textcolor{comment}{// Draw vertices}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00074}00074     target.\mbox{\hyperlink{classsf_1_1_render_target_a12417a3bcc245c41d957b29583556f39}{draw}}(\mbox{\hyperlink{class_particle_node_a101b5d671c59154de5c2048676b3bac8}{mVertexArray}}, states);}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00075}00075 \}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00076}00076 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00077}\mbox{\hyperlink{class_particle_node_afe0abbf46de0806733bdea221b66c3d6}{00077}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_particle_node_afe0abbf46de0806733bdea221b66c3d6}{ParticleNode::addVertex}}(\textcolor{keywordtype}{float} worldX, \textcolor{keywordtype}{float} worldY, \textcolor{keywordtype}{float} texCoordX, \textcolor{keywordtype}{float} texCoordY, \textcolor{keyword}{const} \mbox{\hyperlink{classsf_1_1_color}{sf::Color}}\& color)\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00078}00078 \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00079}00079     \mbox{\hyperlink{classsf_1_1_vertex}{sf::Vertex}} vertex;}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00080}00080     vertex.\mbox{\hyperlink{classsf_1_1_vertex_ac627e9567757147f1894b85f6e771060}{position}} = \mbox{\hyperlink{namespacesf_a80cea3c46537294fd1d8d428566ad8b2}{sf::Vector2f}}(worldX, worldY);}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00081}00081     vertex.\mbox{\hyperlink{classsf_1_1_vertex_af12ae740bed18b6efbdf56c3c304284d}{texCoords}} = \mbox{\hyperlink{namespacesf_a80cea3c46537294fd1d8d428566ad8b2}{sf::Vector2f}}(texCoordX, texCoordY);}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00082}00082     vertex.\mbox{\hyperlink{classsf_1_1_vertex_a3a3ff3f6cf46b1848795991e8159b922}{color}} = color;}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00083}00083 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00084}00084     \mbox{\hyperlink{class_particle_node_a101b5d671c59154de5c2048676b3bac8}{mVertexArray}}.\mbox{\hyperlink{classsf_1_1_vertex_array_a80c8f6865e53bd21fc6cb10fffa10035}{append}}(vertex);}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00085}00085 \}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00086}00086 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00087}\mbox{\hyperlink{class_particle_node_a75a9822330bc236bce9957da1f196922}{00087}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_particle_node_a75a9822330bc236bce9957da1f196922}{ParticleNode::computeVertices}}()\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00088}00088 \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00089}00089     \textcolor{comment}{//Determine the vertex positions more easily}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00090}00090     \mbox{\hyperlink{classsf_1_1_vector2}{sf::Vector2f}} size(\mbox{\hyperlink{class_particle_node_ac53a11666cf195dc17af575ec74a990c}{mTexture}}.\mbox{\hyperlink{classsf_1_1_texture_a9f86b8cc670c6399c539d4ce07ae5c8a}{getSize}}());}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00091}00091     \mbox{\hyperlink{classsf_1_1_vector2}{sf::Vector2f}} half = size / 2.f;}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00092}00092 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00093}00093     \textcolor{comment}{// Refill vertex array}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00094}00094     \mbox{\hyperlink{class_particle_node_a101b5d671c59154de5c2048676b3bac8}{mVertexArray}}.\mbox{\hyperlink{classsf_1_1_vertex_array_a3654c424aca1f9e468f369bc777c839c}{clear}}();}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00095}00095     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \mbox{\hyperlink{struct_particle}{Particle}}\& particle : \mbox{\hyperlink{class_particle_node_ae8df6ca95db688034122d24d4cc50197}{mParticles}})}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00096}00096     \{}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00097}00097         \mbox{\hyperlink{classsf_1_1_vector2}{sf::Vector2f}} pos = particle.position;}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00098}00098         \mbox{\hyperlink{classsf_1_1_color}{sf::Color}} color = particle.color;}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00099}00099         \textcolor{comment}{//Compute the ratio between the remaining and total lifetime -\/ [0,1] -\/-\/> [0, 255] sets the alpha value}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00100}00100         \textcolor{keywordtype}{float} ratio = particle.lifetime.asSeconds() / Table[\mbox{\hyperlink{class_particle_node_a4485ad546e45a412ac3961067248d23f}{mType}}].lifetime.asSeconds();}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00101}00101         color.\mbox{\hyperlink{classsf_1_1_color_a56dbdb47d5f040d9b78ac6a0b8b3a831}{a}} = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{namespacesf_a4ef3d630785c4f296f9b4f274c33d78e}{sf::Uint8}}\textcolor{keyword}{>}(255 * std::max(ratio, 0.f));}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00102}00102 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00103}00103         \textcolor{comment}{//We add four vertices for each particle, one in every corner of rectangle}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00104}00104         \textcolor{comment}{//the first two arguments denote the target coordinates, and the next two denote the texture coordinates}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00105}00105         \mbox{\hyperlink{class_particle_node_afe0abbf46de0806733bdea221b66c3d6}{addVertex}}(pos.\mbox{\hyperlink{classsf_1_1_vector2_a1e6ad77fa155f3753bfb92699bd28141}{x}} -\/ half.\mbox{\hyperlink{classsf_1_1_vector2_a1e6ad77fa155f3753bfb92699bd28141}{x}}, pos.\mbox{\hyperlink{classsf_1_1_vector2_a420f2481b015f4eb929c75f2af564299}{y}} -\/ half.\mbox{\hyperlink{classsf_1_1_vector2_a420f2481b015f4eb929c75f2af564299}{y}}, 0.f, 0.f, color);}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00106}00106         \mbox{\hyperlink{class_particle_node_afe0abbf46de0806733bdea221b66c3d6}{addVertex}}(pos.\mbox{\hyperlink{classsf_1_1_vector2_a1e6ad77fa155f3753bfb92699bd28141}{x}} + half.\mbox{\hyperlink{classsf_1_1_vector2_a1e6ad77fa155f3753bfb92699bd28141}{x}}, pos.\mbox{\hyperlink{classsf_1_1_vector2_a420f2481b015f4eb929c75f2af564299}{y}} -\/ half.\mbox{\hyperlink{classsf_1_1_vector2_a420f2481b015f4eb929c75f2af564299}{y}}, size.\mbox{\hyperlink{classsf_1_1_vector2_a1e6ad77fa155f3753bfb92699bd28141}{x}}, 0.f, color);}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00107}00107         \mbox{\hyperlink{class_particle_node_afe0abbf46de0806733bdea221b66c3d6}{addVertex}}(pos.\mbox{\hyperlink{classsf_1_1_vector2_a1e6ad77fa155f3753bfb92699bd28141}{x}} + half.\mbox{\hyperlink{classsf_1_1_vector2_a1e6ad77fa155f3753bfb92699bd28141}{x}}, pos.\mbox{\hyperlink{classsf_1_1_vector2_a420f2481b015f4eb929c75f2af564299}{y}} + half.\mbox{\hyperlink{classsf_1_1_vector2_a420f2481b015f4eb929c75f2af564299}{y}}, size.\mbox{\hyperlink{classsf_1_1_vector2_a1e6ad77fa155f3753bfb92699bd28141}{x}}, size.\mbox{\hyperlink{classsf_1_1_vector2_a420f2481b015f4eb929c75f2af564299}{y}}, color);}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00108}00108         \mbox{\hyperlink{class_particle_node_afe0abbf46de0806733bdea221b66c3d6}{addVertex}}(pos.\mbox{\hyperlink{classsf_1_1_vector2_a1e6ad77fa155f3753bfb92699bd28141}{x}} -\/ half.\mbox{\hyperlink{classsf_1_1_vector2_a1e6ad77fa155f3753bfb92699bd28141}{x}}, pos.\mbox{\hyperlink{classsf_1_1_vector2_a420f2481b015f4eb929c75f2af564299}{y}} + half.\mbox{\hyperlink{classsf_1_1_vector2_a420f2481b015f4eb929c75f2af564299}{y}}, 0.f, size.\mbox{\hyperlink{classsf_1_1_vector2_a420f2481b015f4eb929c75f2af564299}{y}}, color);}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00109}00109     \}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00110}00110 \}}
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00111}00111 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00112}00112 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00113}00113 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00114}00114 }
\DoxyCodeLine{\Hypertarget{_week11_2_week11-_demo5-_particle_2_source_2_particle_node_8cpp_source_l00115}00115 \textcolor{preprocessor}{\#pragma endregion}}

\end{DoxyCode}
